<!DOCTYPE html><html lang="en" dir="ltr" data-theme="dark" data-has-toc data-has-sidebar class="astro-bguv2lll"> <head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Gemini CLI for the enterprise | Gemini CLI</title><link rel="canonical" href="https://geminicli.com/docs/cli/enterprise/"/><link rel="sitemap" href="/sitemap-index.xml"/><link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="true"/><link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;700&display=block" rel="stylesheet"/><link href="https://fonts.googleapis.com/css2?family=Google+Sans+Text:wght@400;500&display=block" rel="stylesheet"/><link href="https://fonts.googleapis.com/css2?family=Google+Sans+Mono:wght@400;500&display=block" rel="stylesheet"/><link href="https://fonts.googleapis.com/css2?family=Google+Symbols&display=block" rel="stylesheet"/><link rel="icon" href="/favicon.ico" sizes="32x32"/><script async src="https://www.googletagmanager.com/gtag/js?id=G-66QE907DJT"></script><script>window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag("js", new Date());
  gtag("config", "G-66QE907DJT");</script><link rel="shortcut icon" href="/icon.png" type="image/png"/><meta name="generator" content="Astro v5.14.8"/><meta name="generator" content="Starlight v0.36.1"/><meta property="og:title" content="Gemini CLI for the enterprise"/><meta property="og:type" content="article"/><meta property="og:url" content="https://geminicli.com/docs/cli/enterprise/"/><meta property="og:locale" content="en"/><meta property="og:description"/><meta property="og:site_name" content="Gemini CLI"/><meta name="twitter:card" content="summary_large_image"/><meta property="og:image" content="https://geminicli.com/assets/social-poster.png"/><meta name="twitter:image" content="https://geminicli.com/assets/social-poster.png"/><script>
	window.StarlightThemeProvider = (() => {
		const storedTheme =
			typeof localStorage !== 'undefined' && localStorage.getItem('starlight-theme');
		const theme =
			storedTheme ||
			(window.matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'dark');
		document.documentElement.dataset.theme = theme === 'light' ? 'light' : 'dark';
		return {
			updatePickers(theme = storedTheme || 'auto') {
				document.querySelectorAll('starlight-theme-select').forEach((picker) => {
					const select = picker.querySelector('select');
					if (select) select.value = theme;
					/** @type {HTMLTemplateElement | null} */
					const tmpl = document.querySelector(`#theme-icons`);
					const newIcon = tmpl && tmpl.content.querySelector('.' + theme);
					if (newIcon) {
						const oldIcon = picker.querySelector('svg.label-icon');
						if (oldIcon) {
							oldIcon.replaceChildren(...newIcon.cloneNode(true).childNodes);
						}
					}
				});
			},
		};
	})();
</script><template id="theme-icons"><svg aria-hidden="true" class="light astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M5 12a1 1 0 0 0-1-1H3a1 1 0 0 0 0 2h1a1 1 0 0 0 1-1Zm.64 5-.71.71a1 1 0 0 0 0 1.41 1 1 0 0 0 1.41 0l.71-.71A1 1 0 0 0 5.64 17ZM12 5a1 1 0 0 0 1-1V3a1 1 0 0 0-2 0v1a1 1 0 0 0 1 1Zm5.66 2.34a1 1 0 0 0 .7-.29l.71-.71a1 1 0 1 0-1.41-1.41l-.66.71a1 1 0 0 0 0 1.41 1 1 0 0 0 .66.29Zm-12-.29a1 1 0 0 0 1.41 0 1 1 0 0 0 0-1.41l-.71-.71a1.004 1.004 0 1 0-1.43 1.41l.73.71ZM21 11h-1a1 1 0 0 0 0 2h1a1 1 0 0 0 0-2Zm-2.64 6A1 1 0 0 0 17 18.36l.71.71a1 1 0 0 0 1.41 0 1 1 0 0 0 0-1.41l-.76-.66ZM12 6.5a5.5 5.5 0 1 0 5.5 5.5A5.51 5.51 0 0 0 12 6.5Zm0 9a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7Zm0 3.5a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1a1 1 0 0 0-1-1Z"/></svg><svg aria-hidden="true" class="dark astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.64 13a1 1 0 0 0-1.05-.14 8.049 8.049 0 0 1-3.37.73 8.15 8.15 0 0 1-8.14-8.1 8.59 8.59 0 0 1 .25-2A1 1 0 0 0 8 2.36a10.14 10.14 0 1 0 14 11.69 1 1 0 0 0-.36-1.05Zm-9.5 6.69A8.14 8.14 0 0 1 7.08 5.22v.27a10.15 10.15 0 0 0 10.14 10.14 9.784 9.784 0 0 0 2.1-.22 8.11 8.11 0 0 1-7.18 4.32v-.04Z"/></svg><svg aria-hidden="true" class="auto astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg></template><link rel="stylesheet" href="/_astro/print.DNXP8c50.css" media="print"><link rel="stylesheet" href="/_astro/debugz.BJBL9UVz.css"><script type="module" src="/_astro/page.CqwDW6Ek.js"></script></head> <body class="astro-bguv2lll"> <a href="#_top" class="astro-7q3lir66">Skip to content</a>  <div class="announcement-banner astro-yriad4ts"> <b class="astro-yriad4ts">Gemini 3 Flash is now available</b>. Speed no longer has to mean compromising
  quality. <a href="https://developers.googleblog.com/gemini-3-flash-is-now-available-in-gemini-cli/" class="astro-yriad4ts">Read the announcement</a> </div> <div class="page sl-flex astro-yriad4ts"> <header class="header astro-yriad4ts"><div id="page-header" class="header astro-3ef6ksr2"> <div class="title-wrapper sl-flex items-center astro-3ef6ksr2"> <div class="links-and-menu astro-3ef6ksr2" role="button" aria-label="Open navigation menu"> <a href="/" class="site-title sl-flex astro-m46x6ez3">  <img class="astro-m46x6ez3" alt="Gemini CLI Icon" src="/_astro/icon.Bo4M5sF3.png" width="1645" height="1645">  <span class="astro-m46x6ez3" translate="no"> Gemini CLI </span> </a>  <div class="nav-items astro-jvd4jwbq"> <a href="/" class="mobile-only astro-jvd4jwbq">Home</a> <div class="extensions-container astro-jvd4jwbq"> <a href="/extensions/" class="dark:text-white text-black no-underline extensions-link astro-jvd4jwbq">Extensions</a> <div class="extensions-menu astro-jvd4jwbq"> <a href="/extensions/" class="mobile-hide astro-jvd4jwbq" class="dark:text-white text-black no-underline extensions-link">Gallery</a> <a href="/extensions/about" class="dark:text-white text-black no-underline astro-jvd4jwbq">About Extensions</a> </div> </div> <a href="/docs/" class="dark:text-white text-black no-underline is-active astro-jvd4jwbq">Docs</a> <a href="/docs/changelogs/" class="dark:text-white text-black no-underline astro-jvd4jwbq">Changelog</a> </div>  </div> </div> <div class="sl-flex justify-end print:hidden search astro-3ef6ksr2"> <site-search class="astro-3ef6ksr2 astro-v37mnknz" data-translations="{&#34;placeholder&#34;:&#34;Search&#34;}"> <button data-open-modal disabled aria-label="Search" aria-keyshortcuts="Control+K" class="astro-v37mnknz"> <svg aria-hidden="true" class="astro-v37mnknz astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.71 20.29 18 16.61A9 9 0 1 0 16.61 18l3.68 3.68a.999.999 0 0 0 1.42 0 1 1 0 0 0 0-1.39ZM11 18a7 7 0 1 1 0-14 7 7 0 0 1 0 14Z"/></svg> <span class="sl-hidden md:sl-block astro-v37mnknz" aria-hidden="true">Search</span> <kbd class="sl-hidden md:sl-flex astro-v37mnknz" style="display: none;"> <kbd class="astro-v37mnknz">Ctrl</kbd><kbd class="astro-v37mnknz">K</kbd> </kbd> </button> <dialog style="padding:0" aria-label="Search" class="astro-v37mnknz"> <div class="dialog-frame sl-flex astro-v37mnknz">  <button data-close-modal class="sl-flex md:sl-hidden astro-v37mnknz"> Cancel </button> <div class="search-container astro-v37mnknz"> <div id="starlight__search" class="astro-v37mnknz"></div> </div> </div> </dialog> </site-search>  <script>
	(() => {
		const openBtn = document.querySelector('button[data-open-modal]');
		const shortcut = openBtn?.querySelector('kbd');
		if (!openBtn || !(shortcut instanceof HTMLElement)) return;
		const platformKey = shortcut.querySelector('kbd');
		if (platformKey && /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)) {
			platformKey.textContent = 'âŒ˜';
			openBtn.setAttribute('aria-keyshortcuts', 'Meta+K');
		}
		shortcut.style.display = '';
	})();
</script> <script type="module" src="/_astro/Search.astro_astro_type_script_index_0_lang.cjYDvRdi.js"></script>   </div> <div class="sl-hidden md:sl-flex print:hidden right-group astro-3ef6ksr2"> <div class="sl-flex social-icons astro-3ef6ksr2"> <a href="https://github.com/google-gemini/gemini-cli" rel="me" class="sl-flex astro-wy4te6ga"><span class="sr-only astro-wy4te6ga">GitHub</span><svg aria-hidden="true" class="astro-wy4te6ga astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg></a> </div> <starlight-theme-select>  <label style="--sl-select-width: 6.25em" class="astro-4yphtoen"> <span class="sr-only astro-4yphtoen">Select theme</span> <svg aria-hidden="true" class="icon label-icon astro-4yphtoen astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg> <select autocomplete="off" class="astro-4yphtoen"> <option value="dark" class="astro-4yphtoen">Dark</option><option value="light" class="astro-4yphtoen">Light</option><option value="auto" selected class="astro-4yphtoen">Auto</option> </select> <svg aria-hidden="true" class="icon caret astro-4yphtoen astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M17 9.17a1 1 0 0 0-1.41 0L12 12.71 8.46 9.17a1 1 0 1 0-1.41 1.42l4.24 4.24a1.002 1.002 0 0 0 1.42 0L17 10.59a1.002 1.002 0 0 0 0-1.42Z"/></svg> </label>  </starlight-theme-select>  <script>
	StarlightThemeProvider.updatePickers();
</script> <script type="module">const r="starlight-theme",o=e=>e==="auto"||e==="dark"||e==="light"?e:"auto",c=()=>o(typeof localStorage<"u"&&localStorage.getItem(r));function n(e){typeof localStorage<"u"&&localStorage.setItem(r,e==="light"||e==="dark"?e:"")}const l=()=>matchMedia("(prefers-color-scheme: light)").matches?"light":"dark";function t(e){StarlightThemeProvider.updatePickers(e),document.documentElement.dataset.theme=e==="auto"?l():e,n(e)}matchMedia("(prefers-color-scheme: light)").addEventListener("change",()=>{c()==="auto"&&t("auto")});class s extends HTMLElement{constructor(){super(),t(c()),this.querySelector("select")?.addEventListener("change",a=>{a.currentTarget instanceof HTMLSelectElement&&t(o(a.currentTarget.value))})}}customElements.define("starlight-theme-select",s);</script> <script type="module">class s extends HTMLElement{constructor(){super();const e=this.querySelector("select");e&&(e.addEventListener("change",t=>{t.currentTarget instanceof HTMLSelectElement&&(window.location.pathname=t.currentTarget.value)}),window.addEventListener("pageshow",t=>{if(!t.persisted)return;const n=e.querySelector("option[selected]")?.index;n!==e.selectedIndex&&(e.selectedIndex=n??0)}))}}customElements.define("starlight-lang-select",s);</script> </div> </div> <script type="module">const e=document.querySelector("[role=button].links-and-menu");e?.addEventListener("click",t=>{const{matches:s}=window.matchMedia("(max-width: 640px)");if(!s)return;if(e.querySelector(".nav-items")?.contains(t.target)){e.classList.remove("is-active");return}t.preventDefault(),e.classList.toggle("is-active")});</script>  </header> <nav class="sidebar print:hidden astro-yriad4ts" aria-label="Main"> <starlight-menu-button class="print:hidden astro-jif73yzw"> <button aria-expanded="false" aria-label="Menu" aria-controls="starlight__sidebar" class="sl-flex md:sl-hidden astro-jif73yzw"> <svg aria-hidden="true" class="open-menu astro-jif73yzw astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M3 8h18a1 1 0 1 0 0-2H3a1 1 0 0 0 0 2Zm18 8H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2Zm0-5H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2Z"/></svg> <svg aria-hidden="true" class="close-menu astro-jif73yzw astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="m13.41 12 6.3-6.29a1.004 1.004 0 1 0-1.42-1.42L12 10.59l-6.29-6.3a1.004 1.004 0 0 0-1.42 1.42l6.3 6.29-6.3 6.29a1 1 0 0 0 0 1.42.998.998 0 0 0 1.42 0l6.29-6.3 6.29 6.3a.999.999 0 0 0 1.42 0 1 1 0 0 0 0-1.42L13.41 12Z"/></svg> </button> </starlight-menu-button> <script type="module">class s extends HTMLElement{constructor(){super(),this.btn=this.querySelector("button"),this.btn.addEventListener("click",()=>this.toggleExpanded());const t=this.closest("nav");t&&t.addEventListener("keyup",e=>this.closeOnEscape(e))}setExpanded(t){this.setAttribute("aria-expanded",String(t)),document.body.toggleAttribute("data-mobile-menu-expanded",t)}toggleExpanded(){this.setExpanded(this.getAttribute("aria-expanded")!=="true")}closeOnEscape(t){t.code==="Escape"&&(this.setExpanded(!1),this.btn.focus())}}customElements.define("starlight-menu-button",s);</script>   <div id="starlight__sidebar" class="sidebar-pane astro-yriad4ts"> <div class="sidebar-content sl-flex astro-yriad4ts"> <sl-sidebar-state-persist data-hash="0rmj47v" class="astro-kku4brbg"> <script aria-hidden="true">
		(() => {
			try {
				if (!matchMedia('(min-width: 50em)').matches) return;
				/** @type {HTMLElement | null} */
				const target = document.querySelector('sl-sidebar-state-persist');
				const state = JSON.parse(sessionStorage.getItem('sl-sidebar-state') || '0');
				if (!target || !state || target.dataset.hash !== state.hash) return;
				window._starlightScrollRestore = state.scroll;
				customElements.define(
					'sl-sidebar-restore',
					class SidebarRestore extends HTMLElement {
						connectedCallback() {
							try {
								const idx = parseInt(this.dataset.index || '');
								const details = this.closest('details');
								if (details && typeof state.open[idx] === 'boolean') details.open = state.open[idx];
							} catch {}
						}
					}
				);
			} catch {}
		})();
	</script>  <ul class="top-level astro-3ii7xxms"> <li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <span class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Overview</span>  </span> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </summary> <sl-sidebar-restore data-index="0"></sl-sidebar-restore> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/docs/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Introduction</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/docs/architecture/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Architecture overview</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/docs/contributing/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Contribution guide</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <span class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Get started</span>  </span> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </summary> <sl-sidebar-restore data-index="1"></sl-sidebar-restore> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/docs/get-started/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Gemini CLI quickstart</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/docs/get-started/gemini-3/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Gemini 3 on Gemini CLI</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/docs/get-started/authentication/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Authentication</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/docs/get-started/configuration/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Configuration</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/docs/get-started/installation/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Installation</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/docs/get-started/examples/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Examples</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <span class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">CLI</span>  </span> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </summary> <sl-sidebar-restore data-index="2"></sl-sidebar-restore> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/docs/cli/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Introduction</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/docs/cli/commands/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Commands</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/docs/cli/checkpointing/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Checkpointing</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/docs/cli/custom-commands/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Custom commands</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/docs/cli/enterprise/" aria-current="page" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Enterprise</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/docs/cli/headless/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Headless mode</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/docs/cli/keyboard-shortcuts/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Keyboard shortcuts</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/docs/cli/model/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Model selection</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/docs/cli/sandbox/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Sandbox</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/docs/cli/session-management/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Session Management</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/docs/cli/settings/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Settings</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/docs/cli/telemetry/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Telemetry</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/docs/cli/themes/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Themes</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/docs/cli/token-caching/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Token caching</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/docs/cli/trusted-folders/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Trusted Folders</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/docs/cli/tutorials/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Tutorials</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/docs/cli/uninstall/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Uninstall</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/docs/cli/system-prompt/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">System prompt override</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <span class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Core</span>  </span> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </summary> <sl-sidebar-restore data-index="3"></sl-sidebar-restore> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/docs/core/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Introduction</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/docs/core/tools-api/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Tools API</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/docs/core/memport/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Memory Import Processor</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/docs/core/policy-engine/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Policy Engine</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <span class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Tools</span>  </span> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </summary> <sl-sidebar-restore data-index="4"></sl-sidebar-restore> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/docs/tools/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Introduction</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/docs/tools/file-system/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">File system</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/docs/tools/shell/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Shell</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/docs/tools/web-fetch/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Web fetch</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/docs/tools/web-search/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Web search</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/docs/tools/memory/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Memory</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/docs/tools/todos/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Todos</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/docs/tools/mcp-server/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">MCP servers</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <span class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Extensions</span>  </span> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </summary> <sl-sidebar-restore data-index="5"></sl-sidebar-restore> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/docs/extensions/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Introduction</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/docs/extensions/getting-started-extensions/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Get started with extensions</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/docs/extensions/extension-releasing/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Extension releasing</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <span class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Hooks</span>  </span> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </summary> <sl-sidebar-restore data-index="6"></sl-sidebar-restore> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/docs/hooks/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Introduction</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/docs/hooks/writing-hooks/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Writing hooks</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/docs/hooks/reference/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Hooks reference</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/docs/hooks/best-practices/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Best practices</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <span class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">IDE integration</span>  </span> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </summary> <sl-sidebar-restore data-index="7"></sl-sidebar-restore> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/docs/ide-integration/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Introduction</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/docs/ide-integration/ide-companion-spec/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">IDE companion spec</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <span class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Development</span>  </span> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </summary> <sl-sidebar-restore data-index="8"></sl-sidebar-restore> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/docs/npm/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">NPM</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/docs/releases/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Releases</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/docs/integration-tests/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Integration tests</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/docs/issue-and-pr-automation/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Issue and PR automation</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <span class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Releases</span>  </span> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </summary> <sl-sidebar-restore data-index="9"></sl-sidebar-restore> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/docs/changelogs/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Release notes</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/docs/changelogs/latest/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Latest release</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/docs/changelogs/preview/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Preview release</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/docs/changelogs/releases/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Changelog</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <span class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Support</span>  </span> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </summary> <sl-sidebar-restore data-index="10"></sl-sidebar-restore> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/docs/faq/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">FAQ</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/docs/troubleshooting/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Troubleshooting</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/docs/quota-and-pricing/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Quota and pricing</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/docs/tos-privacy/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Terms of service</span>  </a> </li> </ul>  </details> </li> </ul>   <script aria-hidden="true">
		(() => {
			const scroller = document.getElementById('starlight__sidebar');
			if (!window._starlightScrollRestore || !scroller) return;
			scroller.scrollTop = window._starlightScrollRestore;
			delete window._starlightScrollRestore;
		})();
	</script> </sl-sidebar-state-persist>  <div class="md:sl-hidden"> <div class="mobile-preferences sl-flex astro-wu23bvmt"> <div class="social-icons astro-wu23bvmt"> <a href="https://github.com/google-gemini/gemini-cli" rel="me" class="sl-flex astro-wy4te6ga"><span class="sr-only astro-wy4te6ga">GitHub</span><svg aria-hidden="true" class="astro-wy4te6ga astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg></a> </div> <starlight-theme-select>  <label style="--sl-select-width: 6.25em" class="astro-4yphtoen"> <span class="sr-only astro-4yphtoen">Select theme</span> <svg aria-hidden="true" class="icon label-icon astro-4yphtoen astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg> <select autocomplete="off" class="astro-4yphtoen"> <option value="dark" class="astro-4yphtoen">Dark</option><option value="light" class="astro-4yphtoen">Light</option><option value="auto" selected class="astro-4yphtoen">Auto</option> </select> <svg aria-hidden="true" class="icon caret astro-4yphtoen astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M17 9.17a1 1 0 0 0-1.41 0L12 12.71 8.46 9.17a1 1 0 1 0-1.41 1.42l4.24 4.24a1.002 1.002 0 0 0 1.42 0L17 10.59a1.002 1.002 0 0 0 0-1.42Z"/></svg> </label>  </starlight-theme-select>  <script>
	StarlightThemeProvider.updatePickers();
</script>   </div>  </div> </div> </div> </nav> <!-- Main grows to push footer down --> <div class="main-frame astro-yriad4ts">   <script type="module">const a=document.getElementById("starlight__sidebar"),n=a?.querySelector("sl-sidebar-state-persist"),o="sl-sidebar-state",i=()=>{let t=[];const e=n?.dataset.hash||"";try{const s=sessionStorage.getItem(o),r=JSON.parse(s||"{}");Array.isArray(r.open)&&r.hash===e&&(t=r.open)}catch{}return{hash:e,open:t,scroll:a?.scrollTop||0}},c=t=>{try{sessionStorage.setItem(o,JSON.stringify(t))}catch{}},d=()=>c(i()),l=(t,e)=>{const s=i();s.open[e]=t,c(s)};n?.addEventListener("click",t=>{if(!(t.target instanceof Element))return;const e=t.target.closest("summary")?.closest("details");if(!e)return;const s=e.querySelector("sl-sidebar-restore"),r=parseInt(s?.dataset.index||"");isNaN(r)||l(!e.open,r)});addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&d()});addEventListener("pageHide",d);</script> <div class="lg:sl-flex astro-67yu43on"> <aside class="right-sidebar-container print:hidden astro-67yu43on"> <div class="right-sidebar astro-67yu43on"> <div class="lg:sl-hidden astro-pb3aqygn"><mobile-starlight-toc data-min-h="2" data-max-h="3" class="astro-doynk5tl"><nav aria-labelledby="starlight__on-this-page--mobile" class="astro-doynk5tl"><details id="starlight__mobile-toc" class="astro-doynk5tl"><summary id="starlight__on-this-page--mobile" class="sl-flex astro-doynk5tl"><span class="toggle sl-flex astro-doynk5tl">On this page<svg aria-hidden="true" class="caret astro-doynk5tl astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg></span><span class="display-current astro-doynk5tl"></span></summary><div class="dropdown astro-doynk5tl"><ul class="isMobile astro-g2bywc46" style="--depth: 0;"> <li class="astro-g2bywc46" style="--depth: 0;"> <a href="#_top" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Introduction</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#centralized-configuration-the-system-settings-file" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Centralized configuration: The system settings file</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#enforcing-system-settings-with-a-wrapper-script" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Enforcing system settings with a wrapper script</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#restricting-tool-access" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Restricting tool access</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#allowlisting-with-coretools" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Allowlisting with coreTools</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#blocklisting-with-excludetools" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Blocklisting with excludeTools</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#disabling-yolo-mode" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Disabling YOLO mode</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#managing-custom-tools-mcp-servers" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Managing custom tools (MCP servers)</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#how-mcp-server-configurations-are-merged" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">How MCP server configurations are merged</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#enforcing-a-catalog-of-tools" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Enforcing a catalog of tools</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#restricting-tools-within-an-mcp-server" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Restricting tools within an MCP server</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#less-secure-pattern-omitting-the-allowlist" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Less secure pattern: Omitting the allowlist</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#enforcing-sandboxing-for-security" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Enforcing sandboxing for security</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#controlling-network-access-via-proxy" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Controlling network access via proxy</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#telemetry-and-auditing" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Telemetry and auditing</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#authentication" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Authentication</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#restricting-logins-to-corporate-domains" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Restricting logins to corporate domains</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#putting-it-all-together-example-system-settingsjson" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Putting it all together: example system settings.json</span> </a>  </li> </ul> </div></details></nav></mobile-starlight-toc><script type="module" src="/_astro/MobileTableOfContents.astro_astro_type_script_index_0_lang.C181hMzK.js"></script></div><div class="right-sidebar-panel sl-hidden lg:sl-block astro-pb3aqygn"><div class="sl-container astro-pb3aqygn"><starlight-toc data-min-h="2" data-max-h="3"><nav aria-labelledby="starlight__on-this-page"><h2 id="starlight__on-this-page">On this page</h2><ul class="astro-g2bywc46" style="--depth: 0;"> <li class="astro-g2bywc46" style="--depth: 0;"> <a href="#_top" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Introduction</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#centralized-configuration-the-system-settings-file" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Centralized configuration: The system settings file</span> </a> <ul class="astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#enforcing-system-settings-with-a-wrapper-script" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Enforcing system settings with a wrapper script</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#restricting-tool-access" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Restricting tool access</span> </a> <ul class="astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#allowlisting-with-coretools" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Allowlisting with coreTools</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#blocklisting-with-excludetools" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Blocklisting with excludeTools</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#disabling-yolo-mode" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Disabling YOLO mode</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#managing-custom-tools-mcp-servers" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Managing custom tools (MCP servers)</span> </a> <ul class="astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#how-mcp-server-configurations-are-merged" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">How MCP server configurations are merged</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#enforcing-a-catalog-of-tools" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Enforcing a catalog of tools</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#restricting-tools-within-an-mcp-server" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Restricting tools within an MCP server</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#less-secure-pattern-omitting-the-allowlist" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Less secure pattern: Omitting the allowlist</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#enforcing-sandboxing-for-security" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Enforcing sandboxing for security</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#controlling-network-access-via-proxy" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Controlling network access via proxy</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#telemetry-and-auditing" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Telemetry and auditing</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#authentication" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Authentication</span> </a> <ul class="astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#restricting-logins-to-corporate-domains" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Restricting logins to corporate domains</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#putting-it-all-together-example-system-settingsjson" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Putting it all together: example system settings.json</span> </a>  </li> </ul> </nav></starlight-toc><script type="module" src="/_astro/TableOfContents.astro_astro_type_script_index_0_lang.CKWWgpjV.js"></script></div></div> </div> </aside> <div class="main-pane astro-67yu43on">  <main data-pagefind-body class="astro-bguv2lll" lang="en" dir="ltr">    <div class="content-panel astro-7nkwcw3z"> <div class="sl-container astro-7nkwcw3z"> <div class="flex items-center page-title astro-guvttfii"> <h1 id="_top" class="flex-1 astro-guvttfii"> Gemini CLI for the enterprise </h1> <div class="mt-4 astro-guvttfii"> <button id="copy-markdown-btn" class="copy-markdown-button astro-guvttfii astro-ym2cbydy" type="button" aria-label="Copy page content as markdown for selected language" title="Copy as Markdown"> <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="astro-ym2cbydy"> <rect width="14" height="14" x="8" y="8" rx="2" ry="2" class="astro-ym2cbydy"></rect> <path d="m4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2" class="astro-ym2cbydy"></path> </svg> <span class="button-text astro-ym2cbydy">Copy as Markdown</span> <span class="success-text astro-ym2cbydy" style="display: none;">Copied!</span> </button>  <script type="module">class i{constructor(){this.init()}init(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>this.setupEventListeners()):this.setupEventListeners()}setupEventListeners(){const t=document.getElementById("copy-markdown-btn");t&&t.addEventListener("click",()=>this.copyMarkdown())}async copyMarkdown(){const t=document.getElementById("copy-markdown-btn");if(t)try{this.setButtonState(t,"copying");const e=`${window.location.pathname.replace(/\/$/,"")}.md`,o=await fetch(e);if(!o.ok)throw new Error(`Failed to fetch markdown: ${o.status}`);const a=await o.text();await this.copyToClipboard(a),this.setButtonState(t,"success"),setTimeout(()=>{this.setButtonState(t,"default")},2e3)}catch(n){console.error("Failed to copy markdown:",n),this.setButtonState(t,"error"),setTimeout(()=>{this.setButtonState(t,"default")},2e3)}}getCurrentLanguage(){return document.documentElement.getAttribute("data-genkit-lang")||"js"}async copyToClipboard(t){if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(t);else throw new Error("Clipboard API not available.")}setButtonState(t,n){const s=t.querySelector(".button-text"),e=t.querySelector(".success-text");switch(t.classList.remove("copying","success","error"),n){case"copying":t.classList.add("copying"),s&&(s.style.display="none"),e&&(e.textContent="Copying...",e.style.display="inline");break;case"success":t.classList.add("success"),s&&(s.style.display="none"),e&&(e.textContent="Copied!",e.style.display="inline");break;case"error":t.classList.add("error"),s&&(s.style.display="none"),e&&(e.textContent="Error",e.style.display="inline");break;default:s&&(s.style.display="inline"),e&&(e.style.display="none");break}}}new i;</script> </div> </div>  </div> </div>  <div class="content-panel astro-7nkwcw3z"> <div class="sl-container astro-7nkwcw3z"> <div class="sl-markdown-content"> <p>This document outlines configuration patterns and best practices for deploying
and managing Gemini CLI in an enterprise environment. By leveraging system-level
settings, administrators can enforce security policies, manage tool access, and
ensure a consistent experience for all users.</p>
<blockquote>
<p><strong>A note on security:</strong> The patterns described in this document are intended
to help administrators create a more controlled and secure environment for
using Gemini CLI. However, they should not be considered a foolproof security
boundary. A determined user with sufficient privileges on their local machine
may still be able to circumvent these configurations. These measures are
designed to prevent accidental misuse and enforce corporate policy in a
managed environment, not to defend against a malicious actor with local
administrative rights.</p>
</blockquote>
<div class="sl-heading-wrapper level-h2"><h2 id="centralized-configuration-the-system-settings-file">Centralized configuration: The system settings file</h2><a class="sl-anchor-link" href="#centralized-configuration-the-system-settings-file"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled â€œCentralized configuration: The system settings fileâ€</span></a></div>
<p>The most powerful tools for enterprise administration are the system-wide
settings files. These files allow you to define a baseline configuration
(<code dir="auto">system-defaults.json</code>) and a set of overrides (<code dir="auto">settings.json</code>) that apply to
all users on a machine. For a complete overview of configuration options, see
the <a href="/docs/get-started/configuration">Configuration documentation</a>.</p>
<p>Settings are merged from four files. The precedence order for single-value
settings (like <code dir="auto">theme</code>) is:</p>
<ol>
<li>System Defaults (<code dir="auto">system-defaults.json</code>)</li>
<li>User Settings (<code dir="auto">~/.gemini/settings.json</code>)</li>
<li>Workspace Settings (<code dir="auto">&#x3C;project>/.gemini/settings.json</code>)</li>
<li>System Overrides (<code dir="auto">settings.json</code>)</li>
</ol>
<p>This means the System Overrides file has the final say. For settings that are
arrays (<code dir="auto">includeDirectories</code>) or objects (<code dir="auto">mcpServers</code>), the values are merged.</p>
<p><strong>Example of merging and precedence:</strong></p>
<p>Here is how settings from different levels are combined.</p>
<ul>
<li>
<p><strong>System defaults <code dir="auto">system-defaults.json</code>:</strong></p>
<div class="expressive-code"><link rel="stylesheet" href="/_astro/ec.me98n.css"><script type="module" src="/_astro/ec.p1z7b.js"></script><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="json"><code><div class="ec-line"><div class="code"><span style="--0:#E1DFDF;--1:#292929">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85CDF1;--1:#00709A">"ui"</span><span style="--0:#E1DFDF;--1:#292929">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85CDF1;--1:#00709A">"theme"</span><span style="--0:#E1DFDF;--1:#292929">: </span><span style="--0:#77D5A3;--1:#007847">"default-corporate-theme"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1DFDF;--1:#292929">  </span></span><span style="--0:#E1DFDF;--1:#292929">},</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85CDF1;--1:#00709A">"context"</span><span style="--0:#E1DFDF;--1:#292929">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85CDF1;--1:#00709A">"includeDirectories"</span><span style="--0:#E1DFDF;--1:#292929">: [</span><span style="--0:#77D5A3;--1:#007847">"/etc/gemini-cli/common-context"</span><span style="--0:#E1DFDF;--1:#292929">]</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1DFDF;--1:#292929">  </span></span><span style="--0:#E1DFDF;--1:#292929">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#E1DFDF;--1:#292929">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="{  &#x22;ui&#x22;: {    &#x22;theme&#x22;: &#x22;default-corporate-theme&#x22;  },  &#x22;context&#x22;: {    &#x22;includeDirectories&#x22;: [&#x22;/etc/gemini-cli/common-context&#x22;]  }}"><div></div></button></div></figure></div>
</li>
<li>
<p><strong>User <code dir="auto">settings.json</code> (<code dir="auto">~/.gemini/settings.json</code>):</strong></p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="json"><code><div class="ec-line"><div class="code"><span style="--0:#E1DFDF;--1:#292929">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85CDF1;--1:#00709A">"ui"</span><span style="--0:#E1DFDF;--1:#292929">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85CDF1;--1:#00709A">"theme"</span><span style="--0:#E1DFDF;--1:#292929">: </span><span style="--0:#77D5A3;--1:#007847">"user-preferred-dark-theme"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1DFDF;--1:#292929">  </span></span><span style="--0:#E1DFDF;--1:#292929">},</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85CDF1;--1:#00709A">"mcpServers"</span><span style="--0:#E1DFDF;--1:#292929">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85CDF1;--1:#00709A">"corp-server"</span><span style="--0:#E1DFDF;--1:#292929">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#85CDF1;--1:#00709A">"command"</span><span style="--0:#E1DFDF;--1:#292929">: </span><span style="--0:#77D5A3;--1:#007847">"/usr/local/bin/corp-server-dev"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1DFDF;--1:#292929">    </span></span><span style="--0:#E1DFDF;--1:#292929">},</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85CDF1;--1:#00709A">"user-tool"</span><span style="--0:#E1DFDF;--1:#292929">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#85CDF1;--1:#00709A">"command"</span><span style="--0:#E1DFDF;--1:#292929">: </span><span style="--0:#77D5A3;--1:#007847">"npm start --prefix ~/tools/my-tool"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1DFDF;--1:#292929">    </span></span><span style="--0:#E1DFDF;--1:#292929">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1DFDF;--1:#292929">  </span></span><span style="--0:#E1DFDF;--1:#292929">},</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85CDF1;--1:#00709A">"context"</span><span style="--0:#E1DFDF;--1:#292929">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85CDF1;--1:#00709A">"includeDirectories"</span><span style="--0:#E1DFDF;--1:#292929">: [</span><span style="--0:#77D5A3;--1:#007847">"~/gemini-context"</span><span style="--0:#E1DFDF;--1:#292929">]</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1DFDF;--1:#292929">  </span></span><span style="--0:#E1DFDF;--1:#292929">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#E1DFDF;--1:#292929">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="{  &#x22;ui&#x22;: {    &#x22;theme&#x22;: &#x22;user-preferred-dark-theme&#x22;  },  &#x22;mcpServers&#x22;: {    &#x22;corp-server&#x22;: {      &#x22;command&#x22;: &#x22;/usr/local/bin/corp-server-dev&#x22;    },    &#x22;user-tool&#x22;: {      &#x22;command&#x22;: &#x22;npm start --prefix ~/tools/my-tool&#x22;    }  },  &#x22;context&#x22;: {    &#x22;includeDirectories&#x22;: [&#x22;~/gemini-context&#x22;]  }}"><div></div></button></div></figure></div>
</li>
<li>
<p><strong>Workspace <code dir="auto">settings.json</code> (<code dir="auto">&#x3C;project>/.gemini/settings.json</code>):</strong></p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="json"><code><div class="ec-line"><div class="code"><span style="--0:#E1DFDF;--1:#292929">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85CDF1;--1:#00709A">"ui"</span><span style="--0:#E1DFDF;--1:#292929">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85CDF1;--1:#00709A">"theme"</span><span style="--0:#E1DFDF;--1:#292929">: </span><span style="--0:#77D5A3;--1:#007847">"project-specific-light-theme"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1DFDF;--1:#292929">  </span></span><span style="--0:#E1DFDF;--1:#292929">},</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85CDF1;--1:#00709A">"mcpServers"</span><span style="--0:#E1DFDF;--1:#292929">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85CDF1;--1:#00709A">"project-tool"</span><span style="--0:#E1DFDF;--1:#292929">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#85CDF1;--1:#00709A">"command"</span><span style="--0:#E1DFDF;--1:#292929">: </span><span style="--0:#77D5A3;--1:#007847">"npm start"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1DFDF;--1:#292929">    </span></span><span style="--0:#E1DFDF;--1:#292929">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1DFDF;--1:#292929">  </span></span><span style="--0:#E1DFDF;--1:#292929">},</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85CDF1;--1:#00709A">"context"</span><span style="--0:#E1DFDF;--1:#292929">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85CDF1;--1:#00709A">"includeDirectories"</span><span style="--0:#E1DFDF;--1:#292929">: [</span><span style="--0:#77D5A3;--1:#007847">"./project-context"</span><span style="--0:#E1DFDF;--1:#292929">]</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1DFDF;--1:#292929">  </span></span><span style="--0:#E1DFDF;--1:#292929">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#E1DFDF;--1:#292929">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="{  &#x22;ui&#x22;: {    &#x22;theme&#x22;: &#x22;project-specific-light-theme&#x22;  },  &#x22;mcpServers&#x22;: {    &#x22;project-tool&#x22;: {      &#x22;command&#x22;: &#x22;npm start&#x22;    }  },  &#x22;context&#x22;: {    &#x22;includeDirectories&#x22;: [&#x22;./project-context&#x22;]  }}"><div></div></button></div></figure></div>
</li>
<li>
<p><strong>System overrides <code dir="auto">settings.json</code>:</strong></p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="json"><code><div class="ec-line"><div class="code"><span style="--0:#E1DFDF;--1:#292929">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85CDF1;--1:#00709A">"ui"</span><span style="--0:#E1DFDF;--1:#292929">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85CDF1;--1:#00709A">"theme"</span><span style="--0:#E1DFDF;--1:#292929">: </span><span style="--0:#77D5A3;--1:#007847">"system-enforced-theme"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1DFDF;--1:#292929">  </span></span><span style="--0:#E1DFDF;--1:#292929">},</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85CDF1;--1:#00709A">"mcpServers"</span><span style="--0:#E1DFDF;--1:#292929">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85CDF1;--1:#00709A">"corp-server"</span><span style="--0:#E1DFDF;--1:#292929">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#85CDF1;--1:#00709A">"command"</span><span style="--0:#E1DFDF;--1:#292929">: </span><span style="--0:#77D5A3;--1:#007847">"/usr/local/bin/corp-server-prod"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1DFDF;--1:#292929">    </span></span><span style="--0:#E1DFDF;--1:#292929">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1DFDF;--1:#292929">  </span></span><span style="--0:#E1DFDF;--1:#292929">},</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85CDF1;--1:#00709A">"context"</span><span style="--0:#E1DFDF;--1:#292929">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85CDF1;--1:#00709A">"includeDirectories"</span><span style="--0:#E1DFDF;--1:#292929">: [</span><span style="--0:#77D5A3;--1:#007847">"/etc/gemini-cli/global-context"</span><span style="--0:#E1DFDF;--1:#292929">]</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1DFDF;--1:#292929">  </span></span><span style="--0:#E1DFDF;--1:#292929">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#E1DFDF;--1:#292929">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="{  &#x22;ui&#x22;: {    &#x22;theme&#x22;: &#x22;system-enforced-theme&#x22;  },  &#x22;mcpServers&#x22;: {    &#x22;corp-server&#x22;: {      &#x22;command&#x22;: &#x22;/usr/local/bin/corp-server-prod&#x22;    }  },  &#x22;context&#x22;: {    &#x22;includeDirectories&#x22;: [&#x22;/etc/gemini-cli/global-context&#x22;]  }}"><div></div></button></div></figure></div>
</li>
</ul>
<p>This results in the following merged configuration:</p>
<ul>
<li><strong>Final merged configuration:</strong>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="json"><code><div class="ec-line"><div class="code"><span style="--0:#E1DFDF;--1:#292929">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85CDF1;--1:#00709A">"ui"</span><span style="--0:#E1DFDF;--1:#292929">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85CDF1;--1:#00709A">"theme"</span><span style="--0:#E1DFDF;--1:#292929">: </span><span style="--0:#77D5A3;--1:#007847">"system-enforced-theme"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1DFDF;--1:#292929">  </span></span><span style="--0:#E1DFDF;--1:#292929">},</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85CDF1;--1:#00709A">"mcpServers"</span><span style="--0:#E1DFDF;--1:#292929">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85CDF1;--1:#00709A">"corp-server"</span><span style="--0:#E1DFDF;--1:#292929">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#85CDF1;--1:#00709A">"command"</span><span style="--0:#E1DFDF;--1:#292929">: </span><span style="--0:#77D5A3;--1:#007847">"/usr/local/bin/corp-server-prod"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1DFDF;--1:#292929">    </span></span><span style="--0:#E1DFDF;--1:#292929">},</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85CDF1;--1:#00709A">"user-tool"</span><span style="--0:#E1DFDF;--1:#292929">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#85CDF1;--1:#00709A">"command"</span><span style="--0:#E1DFDF;--1:#292929">: </span><span style="--0:#77D5A3;--1:#007847">"npm start --prefix ~/tools/my-tool"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1DFDF;--1:#292929">    </span></span><span style="--0:#E1DFDF;--1:#292929">},</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85CDF1;--1:#00709A">"project-tool"</span><span style="--0:#E1DFDF;--1:#292929">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#85CDF1;--1:#00709A">"command"</span><span style="--0:#E1DFDF;--1:#292929">: </span><span style="--0:#77D5A3;--1:#007847">"npm start"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1DFDF;--1:#292929">    </span></span><span style="--0:#E1DFDF;--1:#292929">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1DFDF;--1:#292929">  </span></span><span style="--0:#E1DFDF;--1:#292929">},</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85CDF1;--1:#00709A">"context"</span><span style="--0:#E1DFDF;--1:#292929">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85CDF1;--1:#00709A">"includeDirectories"</span><span style="--0:#E1DFDF;--1:#292929">: [</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#77D5A3;--1:#007847">"/etc/gemini-cli/common-context"</span><span style="--0:#E1DFDF;--1:#292929">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#77D5A3;--1:#007847">"~/gemini-context"</span><span style="--0:#E1DFDF;--1:#292929">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#77D5A3;--1:#007847">"./project-context"</span><span style="--0:#E1DFDF;--1:#292929">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#77D5A3;--1:#007847">"/etc/gemini-cli/global-context"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1DFDF;--1:#292929">    </span></span><span style="--0:#E1DFDF;--1:#292929">]</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1DFDF;--1:#292929">  </span></span><span style="--0:#E1DFDF;--1:#292929">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#E1DFDF;--1:#292929">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="{  &#x22;ui&#x22;: {    &#x22;theme&#x22;: &#x22;system-enforced-theme&#x22;  },  &#x22;mcpServers&#x22;: {    &#x22;corp-server&#x22;: {      &#x22;command&#x22;: &#x22;/usr/local/bin/corp-server-prod&#x22;    },    &#x22;user-tool&#x22;: {      &#x22;command&#x22;: &#x22;npm start --prefix ~/tools/my-tool&#x22;    },    &#x22;project-tool&#x22;: {      &#x22;command&#x22;: &#x22;npm start&#x22;    }  },  &#x22;context&#x22;: {    &#x22;includeDirectories&#x22;: [      &#x22;/etc/gemini-cli/common-context&#x22;,      &#x22;~/gemini-context&#x22;,      &#x22;./project-context&#x22;,      &#x22;/etc/gemini-cli/global-context&#x22;    ]  }}"><div></div></button></div></figure></div>
</li>
</ul>
<p><strong>Why:</strong></p>
<ul>
<li>
<p><strong><code dir="auto">theme</code></strong>: The value from the system overrides (<code dir="auto">system-enforced-theme</code>) is
used, as it has the highest precedence.</p>
</li>
<li>
<p><strong><code dir="auto">mcpServers</code></strong>: The objects are merged. The <code dir="auto">corp-server</code> definition from
the system overrides takes precedence over the userâ€™s definition. The unique
<code dir="auto">user-tool</code> and <code dir="auto">project-tool</code> are included.</p>
</li>
<li>
<p><strong><code dir="auto">includeDirectories</code></strong>: The arrays are concatenated in the order of System
Defaults, User, Workspace, and then System Overrides.</p>
</li>
<li>
<p><strong>Location</strong>:</p>
<ul>
<li><strong>Linux</strong>: <code dir="auto">/etc/gemini-cli/settings.json</code></li>
<li><strong>Windows</strong>: <code dir="auto">C:\ProgramData\gemini-cli\settings.json</code></li>
<li><strong>macOS</strong>: <code dir="auto">/Library/Application Support/GeminiCli/settings.json</code></li>
<li>The path can be overridden using the <code dir="auto">GEMINI_CLI_SYSTEM_SETTINGS_PATH</code>
environment variable.</li>
</ul>
</li>
<li>
<p><strong>Control</strong>: This file should be managed by system administrators and
protected with appropriate file permissions to prevent unauthorized
modification by users.</p>
</li>
</ul>
<p>By using the system settings file, you can enforce the security and
configuration patterns described below.</p>
<div class="sl-heading-wrapper level-h3"><h3 id="enforcing-system-settings-with-a-wrapper-script">Enforcing system settings with a wrapper script</h3><a class="sl-anchor-link" href="#enforcing-system-settings-with-a-wrapper-script"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled â€œEnforcing system settings with a wrapper scriptâ€</span></a></div>
<p>While the <code dir="auto">GEMINI_CLI_SYSTEM_SETTINGS_PATH</code> environment variable provides
flexibility, a user could potentially override it to point to a different
settings file, bypassing the centrally managed configuration. To mitigate this,
enterprises can deploy a wrapper script or alias that ensures the environment
variable is always set to the corporate-controlled path.</p>
<p>This approach ensures that no matter how the user calls the <code dir="auto">gemini</code> command,
the enterprise settings are always loaded with the highest precedence.</p>
<p><strong>Example wrapper script:</strong></p>
<p>Administrators can create a script named <code dir="auto">gemini</code> and place it in a directory
that appears earlier in the userâ€™s <code dir="auto">PATH</code> than the actual Gemini CLI binary
(e.g., <code dir="auto">/usr/local/bin/gemini</code>).</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="bash"><code><div class="ec-line"><div class="code"><span style="--0:#8E8E8E;--1:#686868">#!/bin/bash</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#8E8E8E;--1:#686868"># Enforce the path to the corporate system settings file.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#8E8E8E;--1:#686868"># This ensures that the company's configuration is always applied.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#FD8DA3;--1:#C12F57">export</span><span style="--0:#E1DFDF;--1:#292929"> GEMINI_CLI_SYSTEM_SETTINGS_PATH</span><span style="--0:#FD8DA3;--1:#C12F57">=</span><span style="--0:#77D5A3;--1:#007847">"/etc/gemini-cli/settings.json"</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#8E8E8E;--1:#686868"># Find the original gemini executable.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#8E8E8E;--1:#686868"># This is a simple example; a more robust solution might be needed</span></div></div><div class="ec-line"><div class="code"><span style="--0:#8E8E8E;--1:#686868"># depending on the installation method.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#E1DFDF;--1:#292929">REAL_GEMINI_PATH</span><span style="--0:#FD8DA3;--1:#C12F57">=</span><span style="--0:#E1DFDF;--1:#292929">$(</span><span style="--0:#8DA8FF;--1:#3252B8">type</span><span style="--0:#E1DFDF;--1:#292929"> </span><span style="--0:#8DA8FF;--1:#3252B8">-aP</span><span style="--0:#E1DFDF;--1:#292929"> </span><span style="--0:#77D5A3;--1:#007847">gemini</span><span style="--0:#E1DFDF;--1:#292929"> </span><span style="--0:#FD8DA3;--1:#C12F57">|</span><span style="--0:#E1DFDF;--1:#292929"> </span><span style="--0:#BD9CFE;--1:#6F4CDE">grep</span><span style="--0:#E1DFDF;--1:#292929"> </span><span style="--0:#8DA8FF;--1:#3252B8">-v</span><span style="--0:#E1DFDF;--1:#292929"> </span><span style="--0:#77D5A3;--1:#007847">"^$(</span><span style="--0:#8DA8FF;--1:#3252B8">type</span><span style="--0:#77D5A3;--1:#007847"> </span><span style="--0:#8DA8FF;--1:#3252B8">-P</span><span style="--0:#77D5A3;--1:#007847"> gemini)$"</span><span style="--0:#E1DFDF;--1:#292929"> </span><span style="--0:#FD8DA3;--1:#C12F57">|</span><span style="--0:#E1DFDF;--1:#292929"> </span><span style="--0:#BD9CFE;--1:#6F4CDE">head</span><span style="--0:#E1DFDF;--1:#292929"> </span><span style="--0:#8DA8FF;--1:#3252B8">-n</span><span style="--0:#E1DFDF;--1:#292929"> </span><span style="--0:#8DA8FF;--1:#3252B8">1</span><span style="--0:#E1DFDF;--1:#292929">)</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#FD8DA3;--1:#C12F57">if</span><span style="--0:#E1DFDF;--1:#292929"> [ </span><span style="--0:#FD8DA3;--1:#C12F57">-z</span><span style="--0:#E1DFDF;--1:#292929"> </span><span style="--0:#77D5A3;--1:#007847">"</span><span style="--0:#E1DFDF;--1:#292929">$REAL_GEMINI_PATH</span><span style="--0:#77D5A3;--1:#007847">"</span><span style="--0:#E1DFDF;--1:#292929"> ]; </span><span style="--0:#FD8DA3;--1:#C12F57">then</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#8DA8FF;--1:#3252B8">echo</span><span style="--0:#E1DFDF;--1:#292929"> </span><span style="--0:#77D5A3;--1:#007847">"Error: The original 'gemini' executable was not found."</span><span style="--0:#E1DFDF;--1:#292929"> </span><span style="--0:#FD8DA3;--1:#C12F57">>&#x26;2</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#8DA8FF;--1:#3252B8">exit</span><span style="--0:#E1DFDF;--1:#292929"> </span><span style="--0:#8DA8FF;--1:#3252B8">1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#FD8DA3;--1:#C12F57">fi</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#8E8E8E;--1:#686868"># Pass all arguments to the real Gemini CLI executable.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#8DA8FF;--1:#3252B8">exec</span><span style="--0:#E1DFDF;--1:#292929"> </span><span style="--0:#77D5A3;--1:#007847">"</span><span style="--0:#E1DFDF;--1:#292929">$REAL_GEMINI_PATH</span><span style="--0:#77D5A3;--1:#007847">"</span><span style="--0:#E1DFDF;--1:#292929"> </span><span style="--0:#77D5A3;--1:#007847">"</span><span style="--0:#8DA8FF;--1:#3252B8">$@</span><span style="--0:#77D5A3;--1:#007847">"</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="#!/bin/bash# Enforce the path to the corporate system settings file.# This ensures that the company&#x27;s configuration is always applied.export GEMINI_CLI_SYSTEM_SETTINGS_PATH=&#x22;/etc/gemini-cli/settings.json&#x22;# Find the original gemini executable.# This is a simple example; a more robust solution might be needed# depending on the installation method.REAL_GEMINI_PATH=$(type -aP gemini | grep -v &#x22;^$(type -P gemini)$&#x22; | head -n 1)if [ -z &#x22;$REAL_GEMINI_PATH&#x22; ]; then  echo &#x22;Error: The original &#x27;gemini&#x27; executable was not found.&#x22; >&#x26;2  exit 1fi# Pass all arguments to the real Gemini CLI executable.exec &#x22;$REAL_GEMINI_PATH&#x22; &#x22;$@&#x22;"><div></div></button></div></figure></div>
<p>By deploying this script, the <code dir="auto">GEMINI_CLI_SYSTEM_SETTINGS_PATH</code> is set within
the scriptâ€™s environment, and the <code dir="auto">exec</code> command replaces the script process
with the actual Gemini CLI process, which inherits the environment variable.
This makes it significantly more difficult for a user to bypass the enforced
settings.</p>
<div class="sl-heading-wrapper level-h2"><h2 id="restricting-tool-access">Restricting tool access</h2><a class="sl-anchor-link" href="#restricting-tool-access"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled â€œRestricting tool accessâ€</span></a></div>
<p>You can significantly enhance security by controlling which tools the Gemini
model can use. This is achieved through the <code dir="auto">tools.core</code> and <code dir="auto">tools.exclude</code>
settings. For a list of available tools, see the
<a href="/docs/tools">Tools documentation</a>.</p>
<div class="sl-heading-wrapper level-h3"><h3 id="allowlisting-with-coretools">Allowlisting with <code dir="auto">coreTools</code></h3><a class="sl-anchor-link" href="#allowlisting-with-coretools"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled â€œAllowlisting with coreToolsâ€</span></a></div>
<p>The most secure approach is to explicitly add the tools and commands that users
are permitted to execute to an allowlist. This prevents the use of any tool not
on the approved list.</p>
<p><strong>Example:</strong> Allow only safe, read-only file operations and listing files.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="json"><code><div class="ec-line"><div class="code"><span style="--0:#E1DFDF;--1:#292929">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85CDF1;--1:#00709A">"tools"</span><span style="--0:#E1DFDF;--1:#292929">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85CDF1;--1:#00709A">"core"</span><span style="--0:#E1DFDF;--1:#292929">: [</span><span style="--0:#77D5A3;--1:#007847">"ReadFileTool"</span><span style="--0:#E1DFDF;--1:#292929">, </span><span style="--0:#77D5A3;--1:#007847">"GlobTool"</span><span style="--0:#E1DFDF;--1:#292929">, </span><span style="--0:#77D5A3;--1:#007847">"ShellTool(ls)"</span><span style="--0:#E1DFDF;--1:#292929">]</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1DFDF;--1:#292929">  </span></span><span style="--0:#E1DFDF;--1:#292929">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#E1DFDF;--1:#292929">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="{  &#x22;tools&#x22;: {    &#x22;core&#x22;: [&#x22;ReadFileTool&#x22;, &#x22;GlobTool&#x22;, &#x22;ShellTool(ls)&#x22;]  }}"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h3"><h3 id="blocklisting-with-excludetools">Blocklisting with <code dir="auto">excludeTools</code></h3><a class="sl-anchor-link" href="#blocklisting-with-excludetools"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled â€œBlocklisting with excludeToolsâ€</span></a></div>
<p>Alternatively, you can add specific tools that are considered dangerous in your
environment to a blocklist.</p>
<p><strong>Example:</strong> Prevent the use of the shell tool for removing files.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="json"><code><div class="ec-line"><div class="code"><span style="--0:#E1DFDF;--1:#292929">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85CDF1;--1:#00709A">"tools"</span><span style="--0:#E1DFDF;--1:#292929">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85CDF1;--1:#00709A">"exclude"</span><span style="--0:#E1DFDF;--1:#292929">: [</span><span style="--0:#77D5A3;--1:#007847">"ShellTool(rm -rf)"</span><span style="--0:#E1DFDF;--1:#292929">]</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1DFDF;--1:#292929">  </span></span><span style="--0:#E1DFDF;--1:#292929">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#E1DFDF;--1:#292929">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="{  &#x22;tools&#x22;: {    &#x22;exclude&#x22;: [&#x22;ShellTool(rm -rf)&#x22;]  }}"><div></div></button></div></figure></div>
<p><strong>Security note:</strong> Blocklisting with <code dir="auto">excludeTools</code> is less secure than
allowlisting with <code dir="auto">coreTools</code>, as it relies on blocking known-bad commands, and
clever users may find ways to bypass simple string-based blocks. <strong>Allowlisting
is the recommended approach.</strong></p>
<div class="sl-heading-wrapper level-h3"><h3 id="disabling-yolo-mode">Disabling YOLO mode</h3><a class="sl-anchor-link" href="#disabling-yolo-mode"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled â€œDisabling YOLO modeâ€</span></a></div>
<p>To ensure that users cannot bypass the confirmation prompt for tool execution,
you can disable YOLO mode at the policy level. This adds a critical layer of
safety, as it prevents the model from executing tools without explicit user
approval.</p>
<p><strong>Example:</strong> Force all tool executions to require user confirmation.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="json"><code><div class="ec-line"><div class="code"><span style="--0:#E1DFDF;--1:#292929">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85CDF1;--1:#00709A">"security"</span><span style="--0:#E1DFDF;--1:#292929">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85CDF1;--1:#00709A">"disableYoloMode"</span><span style="--0:#E1DFDF;--1:#292929">: </span><span style="--0:#8DA8FF;--1:#3252B8">true</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1DFDF;--1:#292929">  </span></span><span style="--0:#E1DFDF;--1:#292929">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#E1DFDF;--1:#292929">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="{  &#x22;security&#x22;: {    &#x22;disableYoloMode&#x22;: true  }}"><div></div></button></div></figure></div>
<p>This setting is highly recommended in an enterprise environment to prevent
unintended tool execution.</p>
<div class="sl-heading-wrapper level-h2"><h2 id="managing-custom-tools-mcp-servers">Managing custom tools (MCP servers)</h2><a class="sl-anchor-link" href="#managing-custom-tools-mcp-servers"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled â€œManaging custom tools (MCP servers)â€</span></a></div>
<p>If your organization uses custom tools via
<a href="/docs/core/tools-api">Model-Context Protocol (MCP) servers</a>, it is crucial to
understand how server configurations are managed to apply security policies
effectively.</p>
<div class="sl-heading-wrapper level-h3"><h3 id="how-mcp-server-configurations-are-merged">How MCP server configurations are merged</h3><a class="sl-anchor-link" href="#how-mcp-server-configurations-are-merged"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled â€œHow MCP server configurations are mergedâ€</span></a></div>
<p>Gemini CLI loads <code dir="auto">settings.json</code> files from three levels: System, Workspace, and
User. When it comes to the <code dir="auto">mcpServers</code> object, these configurations are
<strong>merged</strong>:</p>
<ol>
<li><strong>Merging:</strong> The lists of servers from all three levels are combined into a
single list.</li>
<li><strong>Precedence:</strong> If a server with the <strong>same name</strong> is defined at multiple
levels (e.g., a server named <code dir="auto">corp-api</code> exists in both system and user
settings), the definition from the highest-precedence level is used. The
order of precedence is: <strong>System > Workspace > User</strong>.</li>
</ol>
<p>This means a user <strong>cannot</strong> override the definition of a server that is already
defined in the system-level settings. However, they <strong>can</strong> add new servers with
unique names.</p>
<div class="sl-heading-wrapper level-h3"><h3 id="enforcing-a-catalog-of-tools">Enforcing a catalog of tools</h3><a class="sl-anchor-link" href="#enforcing-a-catalog-of-tools"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled â€œEnforcing a catalog of toolsâ€</span></a></div>
<p>The security of your MCP tool ecosystem depends on a combination of defining the
canonical servers and adding their names to an allowlist.</p>
<div class="sl-heading-wrapper level-h3"><h3 id="restricting-tools-within-an-mcp-server">Restricting tools within an MCP server</h3><a class="sl-anchor-link" href="#restricting-tools-within-an-mcp-server"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled â€œRestricting tools within an MCP serverâ€</span></a></div>
<p>For even greater security, especially when dealing with third-party MCP servers,
you can restrict which specific tools from a server are exposed to the model.
This is done using the <code dir="auto">includeTools</code> and <code dir="auto">excludeTools</code> properties within a
serverâ€™s definition. This allows you to use a subset of tools from a server
without allowing potentially dangerous ones.</p>
<p>Following the principle of least privilege, it is highly recommended to use
<code dir="auto">includeTools</code> to create an allowlist of only the necessary tools.</p>
<p><strong>Example:</strong> Only allow the <code dir="auto">code-search</code> and <code dir="auto">get-ticket-details</code> tools from a
third-party MCP server, even if the server offers other tools like
<code dir="auto">delete-ticket</code>.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="json"><code><div class="ec-line"><div class="code"><span style="--0:#E1DFDF;--1:#292929">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85CDF1;--1:#00709A">"mcp"</span><span style="--0:#E1DFDF;--1:#292929">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85CDF1;--1:#00709A">"allowed"</span><span style="--0:#E1DFDF;--1:#292929">: [</span><span style="--0:#77D5A3;--1:#007847">"third-party-analyzer"</span><span style="--0:#E1DFDF;--1:#292929">]</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1DFDF;--1:#292929">  </span></span><span style="--0:#E1DFDF;--1:#292929">},</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85CDF1;--1:#00709A">"mcpServers"</span><span style="--0:#E1DFDF;--1:#292929">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85CDF1;--1:#00709A">"third-party-analyzer"</span><span style="--0:#E1DFDF;--1:#292929">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#85CDF1;--1:#00709A">"command"</span><span style="--0:#E1DFDF;--1:#292929">: </span><span style="--0:#77D5A3;--1:#007847">"/usr/local/bin/start-3p-analyzer.sh"</span><span style="--0:#E1DFDF;--1:#292929">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#85CDF1;--1:#00709A">"includeTools"</span><span style="--0:#E1DFDF;--1:#292929">: [</span><span style="--0:#77D5A3;--1:#007847">"code-search"</span><span style="--0:#E1DFDF;--1:#292929">, </span><span style="--0:#77D5A3;--1:#007847">"get-ticket-details"</span><span style="--0:#E1DFDF;--1:#292929">]</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1DFDF;--1:#292929">    </span></span><span style="--0:#E1DFDF;--1:#292929">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1DFDF;--1:#292929">  </span></span><span style="--0:#E1DFDF;--1:#292929">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#E1DFDF;--1:#292929">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="{  &#x22;mcp&#x22;: {    &#x22;allowed&#x22;: [&#x22;third-party-analyzer&#x22;]  },  &#x22;mcpServers&#x22;: {    &#x22;third-party-analyzer&#x22;: {      &#x22;command&#x22;: &#x22;/usr/local/bin/start-3p-analyzer.sh&#x22;,      &#x22;includeTools&#x22;: [&#x22;code-search&#x22;, &#x22;get-ticket-details&#x22;]    }  }}"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h4"><h4 id="more-secure-pattern-define-and-add-to-allowlist-in-system-settings">More secure pattern: Define and add to allowlist in system settings</h4><a class="sl-anchor-link" href="#more-secure-pattern-define-and-add-to-allowlist-in-system-settings"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled â€œMore secure pattern: Define and add to allowlist in system settingsâ€</span></a></div>
<p>To create a secure, centrally-managed catalog of tools, the system administrator
<strong>must</strong> do both of the following in the system-level <code dir="auto">settings.json</code> file:</p>
<ol>
<li><strong>Define the full configuration</strong> for every approved server in the
<code dir="auto">mcpServers</code> object. This ensures that even if a user defines a server with
the same name, the secure system-level definition will take precedence.</li>
<li><strong>Add the names</strong> of those servers to an allowlist using the <code dir="auto">mcp.allowed</code>
setting. This is a critical security step that prevents users from running
any servers that are not on this list. If this setting is omitted, the CLI
will merge and allow any server defined by the user.</li>
</ol>
<p><strong>Example system <code dir="auto">settings.json</code>:</strong></p>
<ol>
<li>
<p>Add the <em>names</em> of all approved servers to an allowlist. This will prevent
users from adding their own servers.</p>
</li>
<li>
<p>Provide the canonical <em>definition</em> for each server on the allowlist.</p>
</li>
</ol>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="json"><code><div class="ec-line"><div class="code"><span style="--0:#E1DFDF;--1:#292929">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85CDF1;--1:#00709A">"mcp"</span><span style="--0:#E1DFDF;--1:#292929">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85CDF1;--1:#00709A">"allowed"</span><span style="--0:#E1DFDF;--1:#292929">: [</span><span style="--0:#77D5A3;--1:#007847">"corp-data-api"</span><span style="--0:#E1DFDF;--1:#292929">, </span><span style="--0:#77D5A3;--1:#007847">"source-code-analyzer"</span><span style="--0:#E1DFDF;--1:#292929">]</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1DFDF;--1:#292929">  </span></span><span style="--0:#E1DFDF;--1:#292929">},</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85CDF1;--1:#00709A">"mcpServers"</span><span style="--0:#E1DFDF;--1:#292929">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85CDF1;--1:#00709A">"corp-data-api"</span><span style="--0:#E1DFDF;--1:#292929">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#85CDF1;--1:#00709A">"command"</span><span style="--0:#E1DFDF;--1:#292929">: </span><span style="--0:#77D5A3;--1:#007847">"/usr/local/bin/start-corp-api.sh"</span><span style="--0:#E1DFDF;--1:#292929">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#85CDF1;--1:#00709A">"timeout"</span><span style="--0:#E1DFDF;--1:#292929">: </span><span style="--0:#8DA8FF;--1:#3252B8">5000</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1DFDF;--1:#292929">    </span></span><span style="--0:#E1DFDF;--1:#292929">},</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85CDF1;--1:#00709A">"source-code-analyzer"</span><span style="--0:#E1DFDF;--1:#292929">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#85CDF1;--1:#00709A">"command"</span><span style="--0:#E1DFDF;--1:#292929">: </span><span style="--0:#77D5A3;--1:#007847">"/usr/local/bin/start-analyzer.sh"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1DFDF;--1:#292929">    </span></span><span style="--0:#E1DFDF;--1:#292929">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1DFDF;--1:#292929">  </span></span><span style="--0:#E1DFDF;--1:#292929">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#E1DFDF;--1:#292929">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="{  &#x22;mcp&#x22;: {    &#x22;allowed&#x22;: [&#x22;corp-data-api&#x22;, &#x22;source-code-analyzer&#x22;]  },  &#x22;mcpServers&#x22;: {    &#x22;corp-data-api&#x22;: {      &#x22;command&#x22;: &#x22;/usr/local/bin/start-corp-api.sh&#x22;,      &#x22;timeout&#x22;: 5000    },    &#x22;source-code-analyzer&#x22;: {      &#x22;command&#x22;: &#x22;/usr/local/bin/start-analyzer.sh&#x22;    }  }}"><div></div></button></div></figure></div>
<p>This pattern is more secure because it uses both definition and an allowlist.
Any server a user defines will either be overridden by the system definition (if
it has the same name) or blocked because its name is not in the <code dir="auto">mcp.allowed</code>
list.</p>
<div class="sl-heading-wrapper level-h3"><h3 id="less-secure-pattern-omitting-the-allowlist">Less secure pattern: Omitting the allowlist</h3><a class="sl-anchor-link" href="#less-secure-pattern-omitting-the-allowlist"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled â€œLess secure pattern: Omitting the allowlistâ€</span></a></div>
<p>If the administrator defines the <code dir="auto">mcpServers</code> object but fails to also specify
the <code dir="auto">mcp.allowed</code> allowlist, users may add their own servers.</p>
<p><strong>Example system <code dir="auto">settings.json</code>:</strong></p>
<p>This configuration defines servers but does not enforce the allowlist. The
administrator has NOT included the â€œmcp.allowedâ€ setting.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="json"><code><div class="ec-line"><div class="code"><span style="--0:#E1DFDF;--1:#292929">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85CDF1;--1:#00709A">"mcpServers"</span><span style="--0:#E1DFDF;--1:#292929">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85CDF1;--1:#00709A">"corp-data-api"</span><span style="--0:#E1DFDF;--1:#292929">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#85CDF1;--1:#00709A">"command"</span><span style="--0:#E1DFDF;--1:#292929">: </span><span style="--0:#77D5A3;--1:#007847">"/usr/local/bin/start-corp-api.sh"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1DFDF;--1:#292929">    </span></span><span style="--0:#E1DFDF;--1:#292929">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1DFDF;--1:#292929">  </span></span><span style="--0:#E1DFDF;--1:#292929">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#E1DFDF;--1:#292929">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="{  &#x22;mcpServers&#x22;: {    &#x22;corp-data-api&#x22;: {      &#x22;command&#x22;: &#x22;/usr/local/bin/start-corp-api.sh&#x22;    }  }}"><div></div></button></div></figure></div>
<p>In this scenario, a user can add their own server in their local
<code dir="auto">settings.json</code>. Because there is no <code dir="auto">mcp.allowed</code> list to filter the merged
results, the userâ€™s server will be added to the list of available tools and
allowed to run.</p>
<div class="sl-heading-wrapper level-h2"><h2 id="enforcing-sandboxing-for-security">Enforcing sandboxing for security</h2><a class="sl-anchor-link" href="#enforcing-sandboxing-for-security"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled â€œEnforcing sandboxing for securityâ€</span></a></div>
<p>To mitigate the risk of potentially harmful operations, you can enforce the use
of sandboxing for all tool execution. The sandbox isolates tool execution in a
containerized environment.</p>
<p><strong>Example:</strong> Force all tool execution to happen within a Docker sandbox.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="json"><code><div class="ec-line"><div class="code"><span style="--0:#E1DFDF;--1:#292929">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85CDF1;--1:#00709A">"tools"</span><span style="--0:#E1DFDF;--1:#292929">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85CDF1;--1:#00709A">"sandbox"</span><span style="--0:#E1DFDF;--1:#292929">: </span><span style="--0:#77D5A3;--1:#007847">"docker"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1DFDF;--1:#292929">  </span></span><span style="--0:#E1DFDF;--1:#292929">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#E1DFDF;--1:#292929">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="{  &#x22;tools&#x22;: {    &#x22;sandbox&#x22;: &#x22;docker&#x22;  }}"><div></div></button></div></figure></div>
<p>You can also specify a custom, hardened Docker image for the sandbox by building
a custom <code dir="auto">sandbox.Dockerfile</code> as described in the
<a href="/docs/cli/sandbox">Sandboxing documentation</a>.</p>
<div class="sl-heading-wrapper level-h2"><h2 id="controlling-network-access-via-proxy">Controlling network access via proxy</h2><a class="sl-anchor-link" href="#controlling-network-access-via-proxy"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled â€œControlling network access via proxyâ€</span></a></div>
<p>In corporate environments with strict network policies, you can configure Gemini
CLI to route all outbound traffic through a corporate proxy. This can be set via
an environment variable, but it can also be enforced for custom tools via the
<code dir="auto">mcpServers</code> configuration.</p>
<p><strong>Example (for an MCP server):</strong></p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="json"><code><div class="ec-line"><div class="code"><span style="--0:#E1DFDF;--1:#292929">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85CDF1;--1:#00709A">"mcpServers"</span><span style="--0:#E1DFDF;--1:#292929">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85CDF1;--1:#00709A">"proxied-server"</span><span style="--0:#E1DFDF;--1:#292929">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#85CDF1;--1:#00709A">"command"</span><span style="--0:#E1DFDF;--1:#292929">: </span><span style="--0:#77D5A3;--1:#007847">"node"</span><span style="--0:#E1DFDF;--1:#292929">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#85CDF1;--1:#00709A">"args"</span><span style="--0:#E1DFDF;--1:#292929">: [</span><span style="--0:#77D5A3;--1:#007847">"mcp_server.js"</span><span style="--0:#E1DFDF;--1:#292929">],</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#85CDF1;--1:#00709A">"env"</span><span style="--0:#E1DFDF;--1:#292929">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#85CDF1;--1:#00709A">"HTTP_PROXY"</span><span style="--0:#E1DFDF;--1:#292929">: </span><span style="--0:#77D5A3;--1:#007847">"http://proxy.example.com:8080"</span><span style="--0:#E1DFDF;--1:#292929">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#85CDF1;--1:#00709A">"HTTPS_PROXY"</span><span style="--0:#E1DFDF;--1:#292929">: </span><span style="--0:#77D5A3;--1:#007847">"http://proxy.example.com:8080"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1DFDF;--1:#292929">      </span></span><span style="--0:#E1DFDF;--1:#292929">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1DFDF;--1:#292929">    </span></span><span style="--0:#E1DFDF;--1:#292929">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1DFDF;--1:#292929">  </span></span><span style="--0:#E1DFDF;--1:#292929">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#E1DFDF;--1:#292929">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="{  &#x22;mcpServers&#x22;: {    &#x22;proxied-server&#x22;: {      &#x22;command&#x22;: &#x22;node&#x22;,      &#x22;args&#x22;: [&#x22;mcp_server.js&#x22;],      &#x22;env&#x22;: {        &#x22;HTTP_PROXY&#x22;: &#x22;http://proxy.example.com:8080&#x22;,        &#x22;HTTPS_PROXY&#x22;: &#x22;http://proxy.example.com:8080&#x22;      }    }  }}"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h2"><h2 id="telemetry-and-auditing">Telemetry and auditing</h2><a class="sl-anchor-link" href="#telemetry-and-auditing"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled â€œTelemetry and auditingâ€</span></a></div>
<p>For auditing and monitoring purposes, you can configure Gemini CLI to send
telemetry data to a central location. This allows you to track tool usage and
other events. For more information, see the
<a href="/docs/cli/telemetry">telemetry documentation</a>.</p>
<p><strong>Example:</strong> Enable telemetry and send it to a local OTLP collector. If
<code dir="auto">otlpEndpoint</code> is not specified, it defaults to <code dir="auto">http://localhost:4317</code>.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="json"><code><div class="ec-line"><div class="code"><span style="--0:#E1DFDF;--1:#292929">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85CDF1;--1:#00709A">"telemetry"</span><span style="--0:#E1DFDF;--1:#292929">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85CDF1;--1:#00709A">"enabled"</span><span style="--0:#E1DFDF;--1:#292929">: </span><span style="--0:#8DA8FF;--1:#3252B8">true</span><span style="--0:#E1DFDF;--1:#292929">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85CDF1;--1:#00709A">"target"</span><span style="--0:#E1DFDF;--1:#292929">: </span><span style="--0:#77D5A3;--1:#007847">"gcp"</span><span style="--0:#E1DFDF;--1:#292929">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85CDF1;--1:#00709A">"logPrompts"</span><span style="--0:#E1DFDF;--1:#292929">: </span><span style="--0:#8DA8FF;--1:#3252B8">false</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1DFDF;--1:#292929">  </span></span><span style="--0:#E1DFDF;--1:#292929">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#E1DFDF;--1:#292929">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="{  &#x22;telemetry&#x22;: {    &#x22;enabled&#x22;: true,    &#x22;target&#x22;: &#x22;gcp&#x22;,    &#x22;logPrompts&#x22;: false  }}"><div></div></button></div></figure></div>
<p><strong>Note:</strong> Ensure that <code dir="auto">logPrompts</code> is set to <code dir="auto">false</code> in an enterprise setting to
avoid collecting potentially sensitive information from user prompts.</p>
<div class="sl-heading-wrapper level-h2"><h2 id="authentication">Authentication</h2><a class="sl-anchor-link" href="#authentication"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled â€œAuthenticationâ€</span></a></div>
<p>You can enforce a specific authentication method for all users by setting the
<code dir="auto">enforcedAuthType</code> in the system-level <code dir="auto">settings.json</code> file. This prevents users
from choosing a different authentication method. See the
<a href="/docs/cli/authentication">Authentication docs</a> for more details.</p>
<p><strong>Example:</strong> Enforce the use of Google login for all users.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="json"><code><div class="ec-line"><div class="code"><span style="--0:#E1DFDF;--1:#292929">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85CDF1;--1:#00709A">"enforcedAuthType"</span><span style="--0:#E1DFDF;--1:#292929">: </span><span style="--0:#77D5A3;--1:#007847">"oauth-personal"</span></div></div><div class="ec-line"><div class="code"><span style="--0:#E1DFDF;--1:#292929">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="{  &#x22;enforcedAuthType&#x22;: &#x22;oauth-personal&#x22;}"><div></div></button></div></figure></div>
<p>If a user has a different authentication method configured, they will be
prompted to switch to the enforced method. In non-interactive mode, the CLI will
exit with an error if the configured authentication method does not match the
enforced one.</p>
<div class="sl-heading-wrapper level-h3"><h3 id="restricting-logins-to-corporate-domains">Restricting logins to corporate domains</h3><a class="sl-anchor-link" href="#restricting-logins-to-corporate-domains"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled â€œRestricting logins to corporate domainsâ€</span></a></div>
<p>For enterprises using Google Workspace, you can enforce that users only
authenticate with their corporate Google accounts. This is a network-level
control that is configured on a proxy server, not within Gemini CLI itself. It
works by intercepting authentication requests to Google and adding a special
HTTP header.</p>
<p>This policy prevents users from logging in with personal Gmail accounts or other
non-corporate Google accounts.</p>
<p>For detailed instructions, see the Google Workspace Admin Help article on
<a href="https://support.google.com/a/answer/1668854?hl=en#zippy=%2Cstep-choose-a-web-proxy-server%2Cstep-configure-the-network-to-block-certain-accounts">blocking access to consumer accounts</a>.</p>
<p>The general steps are as follows:</p>
<ol>
<li><strong>Intercept Requests</strong>: Configure your web proxy to intercept all requests
to <code dir="auto">google.com</code>.</li>
<li><strong>Add HTTP Header</strong>: For each intercepted request, add the
<code dir="auto">X-GoogApps-Allowed-Domains</code> HTTP header.</li>
<li><strong>Specify Domains</strong>: The value of the header should be a comma-separated
list of your approved Google Workspace domain names.</li>
</ol>
<p><strong>Example header:</strong></p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#e1dfdf;--1:#292929">X-GoogApps-Allowed-Domains: my-corporate-domain.com, secondary-domain.com</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="X-GoogApps-Allowed-Domains: my-corporate-domain.com, secondary-domain.com"><div></div></button></div></figure></div>
<p>When this header is present, Googleâ€™s authentication service will only allow
logins from accounts belonging to the specified domains.</p>
<div class="sl-heading-wrapper level-h2"><h2 id="putting-it-all-together-example-system-settingsjson">Putting it all together: example system <code dir="auto">settings.json</code></h2><a class="sl-anchor-link" href="#putting-it-all-together-example-system-settingsjson"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled â€œPutting it all together: example system settings.jsonâ€</span></a></div>
<p>Here is an example of a system <code dir="auto">settings.json</code> file that combines several of the
patterns discussed above to create a secure, controlled environment for Gemini
CLI.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="json"><code><div class="ec-line"><div class="code"><span style="--0:#E1DFDF;--1:#292929">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85CDF1;--1:#00709A">"tools"</span><span style="--0:#E1DFDF;--1:#292929">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85CDF1;--1:#00709A">"sandbox"</span><span style="--0:#E1DFDF;--1:#292929">: </span><span style="--0:#77D5A3;--1:#007847">"docker"</span><span style="--0:#E1DFDF;--1:#292929">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85CDF1;--1:#00709A">"core"</span><span style="--0:#E1DFDF;--1:#292929">: [</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#77D5A3;--1:#007847">"ReadFileTool"</span><span style="--0:#E1DFDF;--1:#292929">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#77D5A3;--1:#007847">"GlobTool"</span><span style="--0:#E1DFDF;--1:#292929">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#77D5A3;--1:#007847">"ShellTool(ls)"</span><span style="--0:#E1DFDF;--1:#292929">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#77D5A3;--1:#007847">"ShellTool(cat)"</span><span style="--0:#E1DFDF;--1:#292929">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#77D5A3;--1:#007847">"ShellTool(grep)"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1DFDF;--1:#292929">    </span></span><span style="--0:#E1DFDF;--1:#292929">]</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1DFDF;--1:#292929">  </span></span><span style="--0:#E1DFDF;--1:#292929">},</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85CDF1;--1:#00709A">"mcp"</span><span style="--0:#E1DFDF;--1:#292929">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85CDF1;--1:#00709A">"allowed"</span><span style="--0:#E1DFDF;--1:#292929">: [</span><span style="--0:#77D5A3;--1:#007847">"corp-tools"</span><span style="--0:#E1DFDF;--1:#292929">]</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1DFDF;--1:#292929">  </span></span><span style="--0:#E1DFDF;--1:#292929">},</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85CDF1;--1:#00709A">"mcpServers"</span><span style="--0:#E1DFDF;--1:#292929">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85CDF1;--1:#00709A">"corp-tools"</span><span style="--0:#E1DFDF;--1:#292929">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#85CDF1;--1:#00709A">"command"</span><span style="--0:#E1DFDF;--1:#292929">: </span><span style="--0:#77D5A3;--1:#007847">"/opt/gemini-tools/start.sh"</span><span style="--0:#E1DFDF;--1:#292929">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#85CDF1;--1:#00709A">"timeout"</span><span style="--0:#E1DFDF;--1:#292929">: </span><span style="--0:#8DA8FF;--1:#3252B8">5000</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1DFDF;--1:#292929">    </span></span><span style="--0:#E1DFDF;--1:#292929">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1DFDF;--1:#292929">  </span></span><span style="--0:#E1DFDF;--1:#292929">},</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85CDF1;--1:#00709A">"telemetry"</span><span style="--0:#E1DFDF;--1:#292929">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85CDF1;--1:#00709A">"enabled"</span><span style="--0:#E1DFDF;--1:#292929">: </span><span style="--0:#8DA8FF;--1:#3252B8">true</span><span style="--0:#E1DFDF;--1:#292929">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85CDF1;--1:#00709A">"target"</span><span style="--0:#E1DFDF;--1:#292929">: </span><span style="--0:#77D5A3;--1:#007847">"gcp"</span><span style="--0:#E1DFDF;--1:#292929">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85CDF1;--1:#00709A">"otlpEndpoint"</span><span style="--0:#E1DFDF;--1:#292929">: </span><span style="--0:#77D5A3;--1:#007847">"https://telemetry-prod.example.com:4317"</span><span style="--0:#E1DFDF;--1:#292929">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85CDF1;--1:#00709A">"logPrompts"</span><span style="--0:#E1DFDF;--1:#292929">: </span><span style="--0:#8DA8FF;--1:#3252B8">false</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1DFDF;--1:#292929">  </span></span><span style="--0:#E1DFDF;--1:#292929">},</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85CDF1;--1:#00709A">"advanced"</span><span style="--0:#E1DFDF;--1:#292929">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85CDF1;--1:#00709A">"bugCommand"</span><span style="--0:#E1DFDF;--1:#292929">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#85CDF1;--1:#00709A">"urlTemplate"</span><span style="--0:#E1DFDF;--1:#292929">: </span><span style="--0:#77D5A3;--1:#007847">"https://servicedesk.example.com/new-ticket?title={title}&#x26;details={info}"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1DFDF;--1:#292929">    </span></span><span style="--0:#E1DFDF;--1:#292929">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1DFDF;--1:#292929">  </span></span><span style="--0:#E1DFDF;--1:#292929">},</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#85CDF1;--1:#00709A">"privacy"</span><span style="--0:#E1DFDF;--1:#292929">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#85CDF1;--1:#00709A">"usageStatisticsEnabled"</span><span style="--0:#E1DFDF;--1:#292929">: </span><span style="--0:#8DA8FF;--1:#3252B8">false</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#E1DFDF;--1:#292929">  </span></span><span style="--0:#E1DFDF;--1:#292929">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#E1DFDF;--1:#292929">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="{  &#x22;tools&#x22;: {    &#x22;sandbox&#x22;: &#x22;docker&#x22;,    &#x22;core&#x22;: [      &#x22;ReadFileTool&#x22;,      &#x22;GlobTool&#x22;,      &#x22;ShellTool(ls)&#x22;,      &#x22;ShellTool(cat)&#x22;,      &#x22;ShellTool(grep)&#x22;    ]  },  &#x22;mcp&#x22;: {    &#x22;allowed&#x22;: [&#x22;corp-tools&#x22;]  },  &#x22;mcpServers&#x22;: {    &#x22;corp-tools&#x22;: {      &#x22;command&#x22;: &#x22;/opt/gemini-tools/start.sh&#x22;,      &#x22;timeout&#x22;: 5000    }  },  &#x22;telemetry&#x22;: {    &#x22;enabled&#x22;: true,    &#x22;target&#x22;: &#x22;gcp&#x22;,    &#x22;otlpEndpoint&#x22;: &#x22;https://telemetry-prod.example.com:4317&#x22;,    &#x22;logPrompts&#x22;: false  },  &#x22;advanced&#x22;: {    &#x22;bugCommand&#x22;: {      &#x22;urlTemplate&#x22;: &#x22;https://servicedesk.example.com/new-ticket?title={title}&#x26;details={info}&#x22;    }  },  &#x22;privacy&#x22;: {    &#x22;usageStatisticsEnabled&#x22;: false  }}"><div></div></button></div></figure></div>
<p>This configuration:</p>
<ul>
<li>Forces all tool execution into a Docker sandbox.</li>
<li>Strictly uses an allowlist for a small set of safe shell commands and file
tools.</li>
<li>Defines and allows a single corporate MCP server for custom tools.</li>
<li>Enables telemetry for auditing, without logging prompt content.</li>
<li>Redirects the <code dir="auto">/bug</code> command to an internal ticketing system.</li>
<li>Disables general usage statistics collection.</li>
</ul> </div>  </div> </div>   </main> </div> </div>   </div> <div id="cookie-notice-wrapper" class="hidden astro-uz2wdcl7"> <div class="cookie-notice-container fixed bottom-0 left-0 right-0 flex justify-center z-50 astro-uz2wdcl7"> <div class="cookie-notice text-sm dark:bg-black/50 bg-white/50 backdrop-blur-sm m-2 p-3 rounded-lg flex max-sm:flex-col items-center border border-black/20 astro-uz2wdcl7"> <div class="mr-2 astro-uz2wdcl7">
This website uses <a href="https://policies.google.com/technologies/cookies" class="underline text-black/70 dark:text-white/70 astro-uz2wdcl7" target="_blank">cookies</a> from Google to deliver and enhance the quality of its services and to analyze
        traffic.
</div> <button id="cookie-ack-button" class="font-bold text-nowrap px-2 py-1 border rounded dark:bg-black/80 dark:text-white/70 dark:border-white/30 border-black/20 astro-uz2wdcl7">
I understand.
</button> </div> </div> </div> <script type="module">const e=document.getElementById("cookie-notice-wrapper"),t="__cookieAck";e&&localStorage.getItem(t)!=="true"&&e.classList.remove("hidden");const o=document.getElementById("cookie-ack-button");o?.addEventListener("click",()=>{localStorage.setItem(t,"true"),e&&(e.style.display="none")});</script>  <!-- Footer at bottom of .page flex container --> <footer class="site-footer astro-yriad4ts theme-aware astro-sz7xmlte"> <div class="footer-content astro-sz7xmlte"> <div class="logos astro-sz7xmlte"> <img class="logo-light astro-sz7xmlte" src="/assets/Google.svg" alt="Google logo" width="64.216" height="21"> <img class="logo-dark astro-sz7xmlte" src="/assets/Google-dark.svg" alt="Google logo" width="64.216" height="21"> <img class="logo-light fordev-logo astro-sz7xmlte" src="/assets/fordevelopers.svg" alt="For Developers logo" width="122.678" height="17.583"> <img class="logo-dark fordev-logo astro-sz7xmlte" src="/assets/fordevelopers-dark.svg" alt="For Developers logo" width="122.678" height="17.583"> </div> <div class="footer-links astro-sz7xmlte"> <a href="/terms" class="tos-link astro-sz7xmlte" target="_blank" rel="noopener noreferrer">Terms</a> <span class="divider astro-sz7xmlte">|</span> <a href="https://policies.google.com/privacy" class="tos-link astro-sz7xmlte" target="_blank" rel="noopener noreferrer">Privacy</a> </div> </div> </footer>  </div>  </body></html>